# 贡献指南

## 适用范围
本指南定义本仓库中 Dart `extension` 代码的准入规则。

## Extension 准入规则
- 仅当同时满足以下条件时允许新增 extension：
  - 不包含业务领域语义（例如订单、支付、账户状态）。
  - 可在多个 App 与模块中复用。
  - 行为清晰、确定，不包含隐藏副作用。
- 若 extension 带有业务语义，应改为 domain service/use-case 实现。

## 允许内容
- 不含产品特定逻辑的通用值格式化。
- 跨 App 行为稳定的集合/字符串/日期辅助能力。
- 对语言或运行时能力的无状态便捷封装。

## 禁止内容
- 在 extension 方法中编写产品或业务决策逻辑。
- 在 extension 中执行远程 I/O、存储写入、埋点上报或路由跳转副作用。
- 在单个文件或类型中混合无关能力的“万能工具扩展”。

## 每个 Extension 的文档要求
每个 extension 必须提供 DartDoc，且包含：
- 用途：解决什么问题。
- 边界：不应在什么场景使用。
- 反例：至少一个具体错误使用示例。
- 边界条件：对 null/空值/非法输入的行为说明。

## 每个 Extension 的测试要求
每个 extension 必须有单元测试，至少覆盖：
- 正常路径。
- 边界条件。
- 与反例相关的行为（预期失败或明确不支持）。
- 该 extension 历史 bug 的回归用例（如有）。

## PR 自检清单（Extension 相关改动）
- 我确认该 extension 不包含业务语义。
- 我已补充或更新 DartDoc（用途、边界、反例、边界条件）。
- 我已补充或更新单元测试（正常、边界、回归路径）。
- 我未在 extension 方法中引入副作用（I/O、网络、埋点、路由）。

## 建议目录组织
- extension 保持小而单一职责。
- 建议在 `lib/src/extensions/` 下按主题一文件一能力组织。
- 文件名按能力命名，避免使用 `utils`、`common` 这类泛化命名。
